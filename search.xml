<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>PDP获取数据</title>
    <url>/2024/11/07/PDP%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<h1 id="pdp获取数据"><a href="#pdp获取数据" class="headerlink" title="pdp获取数据"></a>pdp获取数据</h1><h2 id="获取参数的节点写法"><a href="#获取参数的节点写法" class="headerlink" title="获取参数的节点写法"></a>获取参数的节点写法</h2><p>type&#x3D;”sql” sql节点获取sql数据<br>fields&#x3D;”ID,Name” 获得数据的别名 ，目前不加默认为数组，通过索引获取，加了为一个数组的对象，<br>args: 输入的参数</p>
<p>db:数据库节点</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">test1</span> <span class="attr">db</span>=<span class="string">&quot;SGAPP&quot;</span> <span class="attr">type</span>=<span class="string">&quot;sql&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;ID,Name&quot;</span> <span class="attr">args</span>=<span class="string">&quot;type&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;2d&quot;</span>&gt;</span>  </span><br><span class="line">    &lt;![CDATA[SELECT ID,NAME AS Name FROM SG_DB.SG_CON_PLANT_B WHERE PLANT_TYPE=&#123;type&#125;]]&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">test1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">test</span> <span class="attr">type</span>=<span class="string">&quot;dll&quot;</span> <span class="attr">dll</span>=<span class="string">&quot;PDP2.0:PDP.GetSystemParameter&quot;</span> <span class="attr">args</span>=<span class="string">&quot;key&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;2d&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="单条sql获取数据"><a href="#单条sql获取数据" class="headerlink" title="单条sql获取数据"></a>单条sql获取数据</h2><p>新写法：PDP.load<br>第一个参数为 “节点位置和名称，第二个位置通过对象传递参数，对象名为sql节点的参数名”</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PDP</span>.<span class="title function_">load</span>(<span class="string">&quot;sync:test1&quot;</span>,&#123;<span class="attr">type</span>:<span class="number">1006</span>&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="多条sql获取数据"><a href="#多条sql获取数据" class="headerlink" title="多条sql获取数据"></a>多条sql获取数据</h2><p>PDP.exec<br>每一条数据是一个对象，所有的打包在一个数组里<br>每个对象里的写法<br>声明type为load<br>xml:加载的sql节点 ,args:传递的参数，用对象传递</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PDP</span>.<span class="title function_">exec</span>([&#123; <span class="attr">type</span>:<span class="string">&quot;load&quot;</span>,<span class="attr">xml</span>:<span class="string">&quot;sync:test1&quot;</span>,<span class="attr">args</span>:&#123;<span class="attr">type</span>:<span class="number">1006</span>&#125;&#125;])</span><br></pre></td></tr></table></figure>

<p>SELECT * FROM SG_META_TABLE</p>
<p>SELECT * FROM SG_META_OBJECT</p>
<p>SELECT *  FROM SG_META_TABLE WHERE TABLE_NAME_ENG LIKE ‘%DEV_ACLINE%’</p>
<p>SELECT * FROM SG_CON_SUBSTATION_B</p>
<p>select * from ys_db_hb.ysh_sc_station</p>
<h2 id="模拟数据写法"><a href="#模拟数据写法" class="headerlink" title="模拟数据写法"></a>模拟数据写法</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">test</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;id,name&quot;</span> <span class="attr">args</span>=<span class="string">&quot;&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;2d&quot;</span>&gt;</span></span><br><span class="line">    1,张三</span><br><span class="line">    2,李四</span><br><span class="line"><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="链接查询sql写法"><a href="#链接查询sql写法" class="headerlink" title="链接查询sql写法"></a>链接查询sql写法</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">test</span> <span class="attr">type</span>=<span class="string">&quot;calc&quot;</span> <span class="attr">args</span>=<span class="string">&quot;devid&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;2d&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;name&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">fields</span>=<span class="string">&quot;id,&quot;</span>&gt;</span></span><br><span class="line">      &lt;![CDATA[SELECT ZC_ID FROM YS_DB.YSH_GUD_DEVICE WHERE jxt_id=&#123;devid&#125;]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">b</span> <span class="attr">args</span>=<span class="string">&quot;a.id&quot;</span>&gt;</span></span><br><span class="line">      &lt;![CDATA[SELECT col3 FROM YS_DB.YSH_SC_DEVICE WHERE ID=&#123;a.id&#125;]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>参数往下穿，最外层的fields获取最下面的节点</p>
<h2 id="union-SQL写法"><a href="#union-SQL写法" class="headerlink" title="union SQL写法"></a>union SQL写法</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">GetAllLinesLeng</span> <span class="attr">type</span>=<span class="string">&quot;union&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;ID,Length,Voltage&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ac</span> <span class="attr">db</span>=<span class="string">&quot;SGC&quot;</span> <span class="attr">type</span>=<span class="string">&quot;sql&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;ID,Length,Voltage&quot;</span>&gt;</span></span><br><span class="line">		&lt;![CDATA[ </span><br><span class="line">     SELECT A.ID,A.LENGTH,&#x27;交流&#x27; || V.NAME FROM SG_DATACENTER.SG_DEV_ACLINE_B AS A</span><br><span class="line">  JOIN SG_DATACENTER.SG_DIC_VOLTAGETYPE V </span><br><span class="line">     ON A.VOLTAGE_TYPE = V.CODE</span><br><span class="line">  WHERE V.CODE IN (1001,1003)</span><br><span class="line">     ]]&gt;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">ac</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dc</span> <span class="attr">db</span>=<span class="string">&quot;SGC&quot;</span> <span class="attr">type</span>=<span class="string">&quot;sql&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;ID,Length,Voltage&quot;</span>&gt;</span></span><br><span class="line">		&lt;![CDATA[ </span><br><span class="line">     SELECT A.ID,A.LENGTH,&#x27;直流&#x27; FROM SG_DATACENTER.SG_DEV_DCLINE_B AS A</span><br><span class="line">     JOIN (SELECT CODE,NAME FROM SG_DATACENTER.SG_DIC_VOLTAGETYPE ) AS B</span><br><span class="line">     ON A.VOLTAGE_TYPE = B.CODE</span><br><span class="line">     ]]&gt;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">dc</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">GetAllLinesLeng</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="跨年写法"><a href="#跨年写法" class="headerlink" title="跨年写法"></a>跨年写法</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">test</span> <span class="attr">type</span>=<span class="string">&quot;period&quot;</span> <span class="attr">period</span>=<span class="string">&quot;y&quot;</span> <span class="attr">s</span>=<span class="string">&quot;0&quot;</span> <span class="attr">e</span>=<span class="string">&quot;1&quot;</span> <span class="attr">args</span>=<span class="string">&quot;st,et&quot;</span>&gt;</span></span><br><span class="line">	&lt;![CDATA[</span><br><span class="line">	SELECT * FROM SG_DATACENTER.SG_COM_TYPHOON_H_FORECAST_@T@&#123;0:yyyy&#125; </span><br><span class="line">	]]&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="内存数据库写法"><a href="#内存数据库写法" class="headerlink" title="内存数据库写法"></a>内存数据库写法</h2><blockquote>
<p>可以将多个表查到服务器内存后建立内存数据库，故只能从data的表中执行SQL</p>
<p>index为内存数据库表创建索引，</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">memory</span> <span class="attr">type</span>=<span class="string">&quot;memory&quot;</span> <span class="attr">args</span>=<span class="string">&quot;st,et&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span>&gt;</span></span><br><span class="line">		&lt;![CDATA[</span><br><span class="line">		SELECT * FROM SG_DATACENTER.SG_COM_TYPHOON_H_FORECAST_@T@&#123;0:yyyy&#125; </span><br><span class="line">		]]&gt;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">index</span> <span class="attr">a</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">index</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">sql</span>&gt;</span></span><br><span class="line">		&lt;![CDATA[</span><br><span class="line">		SELECT * FROM a</span><br><span class="line">		]]&gt;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">memory</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="calc上一条sql结果是下一条的条件"><a href="#calc上一条sql结果是下一条的条件" class="headerlink" title="calc上一条sql结果是下一条的条件"></a>calc上一条sql结果是下一条的条件</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&lt;</span>test type<span class="operator">=</span>&quot;calc&quot; args<span class="operator">=</span>&quot;devid&quot; datatype<span class="operator">=</span>&quot;2d&quot; fields<span class="operator">=</span>&quot;name&quot; a<span class="operator">=</span>&quot;115123265642443316&quot;<span class="operator">&gt;</span></span><br><span class="line">       <span class="operator">&lt;</span>a fields<span class="operator">=</span>&quot;id,&quot;<span class="operator">&gt;</span></span><br><span class="line">     <span class="operator">&lt;</span><span class="operator">!</span>[CDATA[<span class="keyword">SELECT</span> ZC_ID <span class="keyword">FROM</span> ]]<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">!</span>[CDATA[same:SearchDistrictCommonSql:SchemaAppName]]<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">!</span>[CDATA[YSH_GUD_DEVICE <span class="keyword">WHERE</span> jxt_id<span class="operator">=</span>&#123;devid&#125;]]<span class="operator">&gt;</span></span><br><span class="line">   <span class="operator">&lt;</span><span class="operator">/</span>a<span class="operator">&gt;</span></span><br><span class="line">       <span class="operator">&lt;</span>b args<span class="operator">=</span>&quot;a.id&quot;<span class="operator">&gt;</span></span><br><span class="line">     <span class="operator">&lt;</span><span class="operator">!</span>[CDATA[<span class="keyword">SELECT</span> col3 <span class="keyword">FROM</span> ]]<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">!</span>[CDATA[same:SearchDistrictCommonSql:SchemaAppName]]<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">!</span>[CDATA[YSH_SC_DEVICE <span class="keyword">WHERE</span> ID<span class="operator">=</span>&#123;a.id&#125;]]<span class="operator">&gt;</span></span><br><span class="line">   <span class="operator">&lt;</span><span class="operator">/</span>b<span class="operator">&gt;</span></span><br><span class="line">   <span class="operator">&lt;</span><span class="operator">/</span>test<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="if写法"><a href="#if写法" class="headerlink" title="if写法"></a>if写法</h2><h2 id="Insert-获取自增id"><a href="#Insert-获取自增id" class="headerlink" title="Insert 获取自增id"></a>Insert 获取自增id</h2><p>insert SQL语句下面的sql想用增加后的id</p>
<p>需要返回自增id的SQL请求条件type 为new,使用的为本身，使用上面返回的自增id使用占位符type可以干掉</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; ref: &quot;0&quot;, value: -1, type: &quot;string&quot; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取用户id"><a href="#获取用户id" class="headerlink" title="获取用户id"></a>获取用户id</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123; <span class="attr">ref</span>: <span class="string">&quot;lib&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;userid&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="复用SQL的节点"><a href="#复用SQL的节点" class="headerlink" title="复用SQL的节点"></a>复用SQL的节点</h2><p>注释语法same : 节点名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;![CDATA[same:SearchDistrictCommonSql:SchemaAppName]]&gt;</span><br></pre></td></tr></table></figure>

<h1 id="设计文件获取SQL的写法"><a href="#设计文件获取SQL的写法" class="headerlink" title="设计文件获取SQL的写法"></a>设计文件获取SQL的写法</h1><h2 id="datasource节点获取"><a href="#datasource节点获取" class="headerlink" title="datasource节点获取"></a>datasource节点获取</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">datasource</span> <span class="attr">type</span>=<span class="string">&quot;load&quot;</span> <span class="attr">id</span>=<span class="string">&quot;factorys&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;生产厂家正序&quot;</span> <span class="attr">node</span>=<span class="string">&quot;sc/sbzc:top5/factory&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cols</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">col</span> <span class="attr">id</span>=<span class="string">&quot;col_type&quot;</span> <span class="attr">name</span>=<span class="string">&quot;type&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;type&quot;</span> <span class="attr">from</span>=<span class="string">&quot;seldevtype&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">col</span> <span class="attr">id</span>=<span class="string">&quot;col_factory&quot;</span> <span class="attr">name</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;factory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">col</span> <span class="attr">id</span>=<span class="string">&quot;col_count&quot;</span> <span class="attr">name</span>=<span class="string">&quot;count&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">cols</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">datasource</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>1、datasource在datasources节点下</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>请求类型</td>
<td>load|read|dll</td>
</tr>
<tr>
<td>id</td>
<td>获取到的参数的名字</td>
<td></td>
</tr>
<tr>
<td>desc</td>
<td>获取参数失败的提示</td>
<td></td>
</tr>
<tr>
<td>node</td>
<td>节点名</td>
<td>：前的是文件路径，冒号后的是根节点，根节点下一层的SQL节点通过&#x2F;获取</td>
</tr>
</tbody></table>
<p>col:name为字段名字</p>
<p>from ：是条件变量，name是条件字段的名字</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> this.load_deviceType(true,() =&gt; &#123;</span><br><span class="line">    console.log(this.deviceType)</span><br><span class="line">    var devtypes = [];</span><br><span class="line">    this.deviceType.forEach(item =&gt; &#123;</span><br><span class="line">      devtypes.push([item.type,item.type])</span><br><span class="line">    &#125;)</span><br><span class="line">    this.devtypes = devtypes;</span><br><span class="line">    this.seldevtype = devtypes[0][0];</span><br><span class="line">  </span><br><span class="line">    this.getFactoryTopData();</span><br><span class="line">    this.$nextTick(function()&#123;</span><br><span class="line">      this.resize();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>类型名_SQL变量名，是发布后的SQL请求函数，获取的值是返回值的value</p>
<blockquote>
<p>异步方法：</p>
<p>this.load_deviceType(true,() &#x3D;&gt; {}）是回调函数，在有依赖关系时使用</p>
<p>同步方法：</p>
<p>var res &#x3D; this.load_deviceType();直接拿到值</p>
</blockquote>
<h2 id="直接通过函数调用"><a href="#直接通过函数调用" class="headerlink" title="直接通过函数调用"></a>直接通过函数调用</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//单条</span><br><span class="line">PDP.load(&quot;sync:test1&quot;,&#123;type:1006&#125;)</span><br><span class="line">//多条</span><br><span class="line">PDP.exec([&#123; type:&quot;load&quot;,xml:&quot;sync:test1&quot;,args:&#123;type:1006&#125;&#125;])</span><br></pre></td></tr></table></figure>

<h2 id="同步写法"><a href="#同步写法" class="headerlink" title="同步写法"></a>同步写法</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var user = PDP.load_userInfo();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>框架</category>
        <category>PDP2</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
        <tag>清单</tag>
      </tags>
  </entry>
  <entry>
    <title>PDP调用接口</title>
    <url>/2024/11/07/PDP%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3/</url>
    <content><![CDATA[<h1 id="PDP调用接口"><a href="#PDP调用接口" class="headerlink" title="PDP调用接口"></a>PDP调用接口</h1><p>PDP调用接口有两种,个人理解，两者都是http请求先到.ashx分发到对应函数，然后将讲函数返回值，通过http响应传给前端。</p>
<h2 id="通过load类型调用"><a href="#通过load类型调用" class="headerlink" title="通过load类型调用"></a>通过load类型调用</h2><p>1、写配置文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">SetDeviceWhiteList</span> <span class="attr">type</span>=<span class="string">&quot;dll&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;json&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;ipE,device&quot;</span> <span class="attr">dll</span>=<span class="string">&quot;RCMain:RC.Main.SetDeviceWhiteList&quot;</span> <span class="attr">args</span>=<span class="string">&quot;ipE,device&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">SetDeviceWhiteList</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>fields，args</td>
<td>String</td>
<td>两者一样，和传入参数名一样即可</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>2、前端调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PDP</span>.<span class="title function_">load</span>(<span class="string">&quot;main/remote:SetDeviceWhiteList&quot;</span>, &#123; <span class="attr">ipE</span>: vm.<span class="property">selRow</span>.<span class="property">ip</span>, <span class="attr">device</span>: whiteList &#125;, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    vm.<span class="property">$Message</span>.<span class="title function_">success</span>(<span class="string">&quot;设置白名单成功!&quot;</span>)</span><br><span class="line">    vm.<span class="property">showDeviceWhitelist</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="PDP-dll调用"><a href="#PDP-dll调用" class="headerlink" title="PDP.dll调用"></a>PDP.dll调用</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PDP</span>.<span class="title function_">dll</span>(<span class="string">&quot;RCMain:RC.Main.RemoteControl&quot;</span>, [<span class="variable language_">this</span>.<span class="property">itemid</span>, remoteIp, netIP, port, osType, lowProtocol, userName, userPassword], <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  </span><br><span class="line">&#125;）</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="PDP调用API接口"><a href="#PDP调用API接口" class="headerlink" title="PDP调用API接口"></a>PDP调用API接口</h2><p><strong>PDP调用示例:</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PDP</span>.<span class="title function_">load</span>(<span class="string">&quot;jb/api:getLastImgListByCode&quot;</span>, &#123; <span class="attr">code</span>: code, <span class="attr">devCode</span>: code, <span class="attr">ak</span>: <span class="variable language_">this</span>.<span class="property">ak</span>, <span class="attr">token</span>: <span class="variable language_">this</span>.<span class="property">token</span>, <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>(), <span class="attr">nonce</span>: <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1000</span>) + <span class="string">&quot;&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() &#125;, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;getLastImgListByCode&quot;</span>, res);</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p><strong>配置项示例:</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">httppost</span> <span class="attr">type</span>=<span class="string">&quot;httppost&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;json&quot;</span> <span class="attr">args</span>=<span class="string">&quot;id&quot;</span> <span class="attr">Content-Type</span>=<span class="string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>&lt;![CDATA[http://127.0.0.1:8003/conn/ashx/AskHandler.ashx]]&gt;<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span>&gt;</span>&lt;![CDATA[&#123;&#123; &quot;m&quot;: &quot;GetDataList&quot;, &quot;node&quot;: &quot;GetUserID&quot;, &quot;args&quot;: &quot;&#123;id&#125;&quot; &#125;&#125;]]&gt;<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">headers</span> <span class="attr">ajaxToken</span>=<span class="string">&quot;Method&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">headers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">httppost</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">httpget</span> <span class="attr">type</span>=<span class="string">&quot;httpget&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;json,2d&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;group,name,value&quot;</span> <span class="attr">field</span>=<span class="string">&quot;1&quot;</span> <span class="attr">args</span>=<span class="string">&quot;conn,xml,args&quot;</span>&gt;</span></span><br><span class="line">  &lt;![CDATA[http://127.0.0.1:8003/conn/ashx/DataHandler.ashx?m=Read&amp;conn=&#123;conn&#125;&amp;xml=&#123;xml&#125;&amp;args=&#123;args&#125;]]&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">httpget</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>和一般的load调用方法一致</p>
<p>httppost  这最外层的节点名称可以修改</p>
</blockquote>
]]></content>
      <categories>
        <category>框架</category>
        <category>PDP2</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
        <tag>清单</tag>
      </tags>
  </entry>
  <entry>
    <title>PDP2.0配置项</title>
    <url>/2024/11/30/PDP2.0%E9%85%8D%E7%BD%AE%E9%A1%B9/</url>
    <content><![CDATA[<h2 id="配置ORACLE数据库节点"><a href="#配置ORACLE数据库节点" class="headerlink" title="配置ORACLE数据库节点"></a>配置ORACLE数据库节点</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Open3000</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">IPCFG</span>&gt;</span>&lt;![CDATA[10.176.164.204:1521/o2000]]&gt;<span class="tag">&lt;/<span class="name">IPCFG</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DATABASE</span>&gt;</span>&lt;![CDATA[EMS]]&gt;<span class="tag">&lt;/<span class="name">DATABASE</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">PROVIDER</span>&gt;</span></span><br><span class="line">        &lt;![CDATA[ORACLE]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">PROVIDER</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DBUSER</span>&gt;</span>&lt;![CDATA[fhyc]]&gt;<span class="tag">&lt;/<span class="name">DBUSER</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">PASSWORD</span>&gt;</span>&lt;![CDATA[2a5e7b6fcbb2fb411267d01af2d6f1432d584c03fc888d71b54f0f4dacfaf2d1]]&gt;<span class="tag">&lt;/<span class="name">PASSWORD</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">SETTINGS</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BATCHEX</span>&gt;</span>&lt;![CDATA[BEGIN;,COMMIT;]]&gt;<span class="tag">&lt;/<span class="name">BATCHEX</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">SETTINGS</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Open3000</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>IPCFG</code>是IP加端口+服务名</p>
</blockquote>
<h2 id="ORACLE的SQL注意事项"><a href="#ORACLE的SQL注意事项" class="headerlink" title="ORACLE的SQL注意事项"></a>ORACLE的SQL注意事项</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">GetZWPlan</span> <span class="attr">db</span>=<span class="string">&quot;Open3000&quot;</span> <span class="attr">type</span>=<span class="string">&quot;load&quot;</span> <span class="attr">fields</span>=<span class="string">&quot;time,value&quot;</span> <span class="attr">args</span>=<span class="string">&quot;s,e&quot;</span> <span class="attr">datatype</span>=<span class="string">&quot;2d&quot;</span>&gt;</span></span><br><span class="line">        &lt;![CDATA[ </span><br><span class="line">        SELECT OCCUR_TIME, CUR_001</span><br><span class="line">        FROM EMS.yc_hs_800001</span><br><span class="line">        WHERE STA_001 = &#x27;1073741824&#x27; AND OCCUR_TIME &gt;=  TO_DATE(&#123;s&#125;,&#x27;YYYY-MM-DD HH24:MI:SS&#x27;) AND OCCUR_TIME &lt;= TO_DATE(&#123;e&#125;,&#x27;YYYY-MM-DD HH24:MI:SS&#x27;)</span><br><span class="line">        ]]&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">GetZWPlan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>末尾不要加分号</li>
<li>时间要通过函数转换</li>
</ol>
<h2 id="配置Mysql数据库"><a href="#配置Mysql数据库" class="headerlink" title="配置Mysql数据库"></a>配置Mysql数据库</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ConnMain</span> <span class="attr">Name</span>=<span class="string">&quot;国调云&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">IPCFG</span>&gt;</span>&lt;![CDATA[ 192.168.6.227; Pooling=false; Allow User Variables=True;SslMode=None; ]]&gt;<span class="tag">&lt;/<span class="name">IPCFG</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DATABASE</span>&gt;</span>&lt;![CDATA[ysh_db]]&gt;<span class="tag">&lt;/<span class="name">DATABASE</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">PROVIDER</span>&gt;</span></span><br><span class="line">        &lt;![CDATA[ MYSQL ]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">PROVIDER</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DBUSER</span>&gt;</span>&lt;![CDATA[root]]&gt;<span class="tag">&lt;/<span class="name">DBUSER</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">PASSWORD</span>&gt;</span>&lt;![CDATA[c1e9829d774eb7d21a69c40c0fb848cff88f323a050a63ae11678d6ebc0b5158]]&gt;<span class="tag">&lt;/<span class="name">PASSWORD</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">SETTINGS</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BATCHEX</span>&gt;</span>&lt;![CDATA[BEGIN;,COMMIT;]]&gt;<span class="tag">&lt;/<span class="name">BATCHEX</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">SETTINGS</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ConnMain</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><strong>Pooling&#x3D;false</strong> ：设置为 <code>false</code>表示不使用连接池，每次请求都会创建新的数据库连接。</li>
<li><strong>Allow User Variables&#x3D;True</strong> ：允许在SQL查询中使用用户自定义的变量。</li>
<li><strong>SslMode&#x3D;None</strong> ：当设置为 <code>None</code>时，表示不使用SSL连接。</li>
</ol>
]]></content>
      <categories>
        <category>框架</category>
        <category>PDP2</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
        <tag>清单</tag>
      </tags>
  </entry>
  <entry>
    <title>冀北超高压</title>
    <url>/2024/11/07/%E5%86%80%E5%8C%97%E8%B6%85%E9%AB%98%E5%8E%8B/</url>
    <content><![CDATA[<h2 id="对接接口的一般实现步骤"><a href="#对接接口的一般实现步骤" class="headerlink" title="对接接口的一般实现步骤"></a>对接接口的一般实现步骤</h2><ol>
<li>使用curl等工具让工程在现场测试通接口</li>
<li>在保证接口畅通的情况下再进行程序的开发</li>
<li>严格遵守这一顺序可按时下班。httpposthttppost</li>
</ol>
<h2 id="对接统一视频平台"><a href="#对接统一视频平台" class="headerlink" title="对接统一视频平台"></a>对接统一视频平台</h2><p>1、获取杆塔需要获取外网的图片机的数据所以需要穿透权限</p>
<p>2、设备code 获取通过树结构资源获取接口逐层获取直至杆塔ID层级</p>
<p>3、调用接口只有 <strong>查询最新图片信息</strong> 接口可用  接口中的双斜线 是错误要去掉</p>
<p>4、鉴权和获取资源不会报跨域 查询最新图片信息接口会跨域  需要使用PDP.load调用api的方式来规避</p>
<p>5、PDP.load调用api的方式来规避  需要查看 网站内是否有 <code>Mono.Security.dll</code> 该dll会造成调用失败  一般为超时错误</p>
]]></content>
      <categories>
        <category>项目</category>
        <category>地理信息导航</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
      </tags>
  </entry>
  <entry>
    <title>PDP2.0问题集合</title>
    <url>/2024/11/20/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/</url>
    <content><![CDATA[<h2 id="大小写问题"><a href="#大小写问题" class="headerlink" title="大小写问题"></a>大小写问题</h2><p>linux上区分大小写 windows上不区分大小写  当同时存在 <code>bin</code>和 <code>Bin</code>时读取要编译的dll会读取Bin下的dll</p>
<h2 id="编译不通过问题"><a href="#编译不通过问题" class="headerlink" title="编译不通过问题"></a>编译不通过问题</h2><p>linux下吧没法编译并且LOG里面没有记录可能是由以下的dll造成的</p>
<p><img src="/image/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/1732093362747.jpg" alt="1732093362747"></p>
<p><strong>云南主配微排除查出来的dll</strong></p>
<p><img src="/image/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/1732093463492.jpg" alt="1732093463492"></p>
<p><img src="/image/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/1732093510245.jpg" alt="1732093510245"></p>
<p><img src="/image/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/1732093524740.jpg" alt="1732093524740"></p>
<p><img src="/image/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/1732093541496.jpg" alt="1732093541496"></p>
<p><img src="/image/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/1732093574196.jpg" alt="1732093574196"></p>
<p><img src="/image/PDP2.0%E9%97%AE%E9%A2%98%E9%9B%86%E5%90%88/1732093592842.jpg" alt="1732093592842"></p>
<h2 id="aspx文件请求Not-Found"><a href="#aspx文件请求Not-Found" class="headerlink" title="aspx文件请求Not Found"></a>aspx文件请求Not Found</h2><p>一把报错为 <code>ip/ajaxpro/... not found</code></p>
<p><strong>解决办法</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">system.web</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">httpHandlers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">add</span> <span class="attr">verb</span>=<span class="string">&quot;POST,GET&quot;</span> <span class="attr">path</span>=<span class="string">&quot;ajaxpro*.ashx&quot;</span> <span class="attr">type</span>=<span class="string">&quot;AjaxPro.AjaxHandlerFactory, AjaxPro.2&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">httpHandlers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">system.web</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="用户模块添加用户报错"><a href="#用户模块添加用户报错" class="headerlink" title="用户模块添加用户报错"></a>用户模块添加用户报错</h2>]]></content>
      <categories>
        <category>框架</category>
        <category>PDP2</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
        <tag>经验</tag>
      </tags>
  </entry>
  <entry>
    <title>地理信息导航总结</title>
    <url>/2024/11/07/%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E5%AF%BC%E8%88%AA%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h2 id="Conncfg配置"><a href="#Conncfg配置" class="headerlink" title="Conncfg配置"></a>Conncfg配置</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ConnMain</span> <span class="attr">Name</span>=<span class="string">&quot;审计日志&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">IPCFG</span>&gt;</span></span><br><span class="line">        &lt;![CDATA[192.168.12.82]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">IPCFG</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DATABASE</span>&gt;</span>&lt;![CDATA[ys_db]]&gt;<span class="tag">&lt;/<span class="name">DATABASE</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">PROVIDER</span>&gt;</span></span><br><span class="line">        &lt;![CDATA[MYSQL]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">PROVIDER</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DBUSER</span>&gt;</span>&lt;![CDATA[root]]&gt;<span class="tag">&lt;/<span class="name">DBUSER</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">PASSWORD</span>&gt;</span>&lt;![CDATA[042fd2789843ff96fddf38a8fe5d763eaec70ec3838dc662ebb1bf0464926fbb]]&gt;<span class="tag">&lt;/<span class="name">PASSWORD</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">SETTINGS</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BATCHEX</span>&gt;</span>&lt;![CDATA[BEGIN;,COMMIT;]]&gt;<span class="tag">&lt;/<span class="name">BATCHEX</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">SETTINGS</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ConnMain</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>标记</th>
<th>作用</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>ConnMain</td>
<td>数据库节点名称，一个节点代表一个库的配置</td>
<td></td>
</tr>
<tr>
<td>IPCFG</td>
<td>数据库IP和端口</td>
<td>没写端口为默认端口</td>
</tr>
<tr>
<td>DATABASE</td>
<td>指定默认数据库</td>
<td></td>
</tr>
<tr>
<td>PROVIDER</td>
<td>指定数据库类型</td>
<td></td>
</tr>
<tr>
<td>DBUSER</td>
<td>用户名</td>
<td></td>
</tr>
<tr>
<td>PASSWORD</td>
<td>密码(加密后的)</td>
<td></td>
</tr>
<tr>
<td>SETTINGS</td>
<td>事务.未设置时默认为BEGIN;END;</td>
<td>要以,分割；</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>项目</category>
        <category>地理信息导航</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
        <tag>配置</tag>
      </tags>
  </entry>
  <entry>
    <title>Echarts功能实现</title>
    <url>/2024/11/07/Echarts%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<h2 id="鼠标所在折线的信息进行展示"><a href="#鼠标所在折线的信息进行展示" class="headerlink" title="鼠标所在折线的信息进行展示"></a>鼠标所在折线的信息进行展示</h2><blockquote>
<p>实现思路<br>1、axisPointer来获取当前鼠标所在的位置的值，并且将其保存<br>2、formatter比较每一个series的值找到离其最近的进行高亮显示</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">varmouseCurValue;</span><br><span class="line"><span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span>,</span><br><span class="line">            <span class="attr">axisPointer</span>: &#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&quot;cross&quot;</span>,</span><br><span class="line">                <span class="attr">label</span>: &#123;</span><br><span class="line">                    <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (params.<span class="property">seriesData</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                            mouseCurValue = params.<span class="property">value</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">                varres = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                varallRes = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                varminDiff = <span class="title class_">Infinity</span>;</span><br><span class="line">                varminDiffIndex = -<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span> (vari = <span class="number">0</span>; i &lt; params.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    varseries = params[i];</span><br><span class="line">                    varv = <span class="title class_">Number</span>(series.<span class="property">value</span>);</span><br><span class="line">                    vardiff = <span class="title class_">Math</span>.<span class="title function_">abs</span>(v - mouseCurValue);</span><br><span class="line">                    <span class="keyword">if</span> (diff &lt; minDiff) &#123;</span><br><span class="line">                        minDiff = diff;</span><br><span class="line">                        minDiffIndex = i;</span><br><span class="line">                    &#125;</span><br><span class="line">                    allRes += series.<span class="property">marker</span> + <span class="string">&quot; &quot;</span> + series.<span class="property">seriesName</span> + <span class="string">&quot;：&quot;</span> + series.<span class="property">value</span> + <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                varselItem = params[minDiffIndex];</span><br><span class="line">                <span class="keyword">if</span> (params.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    res += params[<span class="number">0</span>].<span class="property">axisValue</span> + <span class="string">&quot;&lt;br/&gt;&quot;</span> + <span class="string">&quot;&lt;div style=&#x27;width:100%;height:5px;&#x27;&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (selItem)</span><br><span class="line">                    res += selItem.<span class="property">marker</span> + <span class="string">&quot;&lt;strong&gt;&lt;u&gt;&quot;</span> + selItem.<span class="property">seriesName</span> + <span class="string">&quot;&lt;/u&gt;&lt;/strong&gt;&quot;</span> + <span class="string">&quot;:&quot;</span> + selItem.<span class="property">value</span> + <span class="string">&quot;&lt;br/&gt;&quot;</span> + <span class="string">&quot;&lt;div style=&#x27;width:100%;height:5px;&#x27;&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">                    res += allRes;</span><br><span class="line">                    <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="category轴设置间隔"><a href="#category轴设置间隔" class="headerlink" title="category轴设置间隔"></a>category轴设置间隔</h2><blockquote>
<p>xAxis下直接设置interval不生效，对于category类型 需要在axisLabel下设置interval</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">XLabelFormatDict</span> = &#123;</span><br><span class="line">        <span class="string">&quot;day&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;时&quot;</span>,</span><br><span class="line">            <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">                <span class="attr">interval</span>: <span class="number">3</span>,</span><br><span class="line">                <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">value, index</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index % <span class="number">4</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="built_in">parseInt</span>(index / <span class="number">4</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;week&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">                <span class="attr">interval</span>: <span class="number">95</span>,</span><br><span class="line">                <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">value, index</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index % <span class="number">96</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_">getWeekText</span>(<span class="built_in">parseInt</span>(index / <span class="number">96</span>));</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;month&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;天&quot;</span>, <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">                <span class="attr">interval</span>: <span class="number">95</span>,</span><br><span class="line">                <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">value, index</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (index % <span class="number">96</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="built_in">parseInt</span>(index / <span class="number">96</span>) + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="format-tooltip格式化后每一项前面的标记"><a href="#format-tooltip格式化后每一项前面的标记" class="headerlink" title="format tooltip格式化后每一项前面的标记"></a>format tooltip格式化后每一项前面的标记</h2><p><code>parames.mark</code> 对象会被渲染成标记</p>
]]></content>
      <categories>
        <category>工具</category>
        <category>前端</category>
      </categories>
      <tags>
        <tag>Echarts</tag>
        <tag>功能片段</tag>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>Echarts配置生成</title>
    <url>/2024/10/16/Echarts%E9%85%8D%E7%BD%AE%E7%94%9F%E6%88%90/</url>
    <content><![CDATA[<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>项目中常遇见的问题在于，echarts的封装跟不上需求的多变性</p>
<h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><blockquote>
<p>实现最大程度的复用并且提供最大程度的灵活性</p>
</blockquote>
<span id="more"></span>

<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>1、要尽可能简单的使用就要使用尽可能少的配置</p>
<p>2、要有适用性就需要以Echarts的文档为准绳，尽可能的不使用自定义语法</p>
<p>3、对于echarts能实现的功能都应该支持</p>
<p>4、最终获取的都是一份配置项所以可以学习echarts的方法向传入的配置项添加默认值，有自定义的参数就覆盖掉默认值即可</p>
<h1 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h1><blockquote>
<p>提供一份option模板，将传入的配置和这个模板进行合并,传入的配置如果有值的用自己的，没有的使用模板的。</p>
<p>option.value &#x3D;配置.value  ? 配置.value : 模板.value</p>
</blockquote>
<h1 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">GenerateChart</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">isObject</span>: <span class="function">(<span class="params">obj</span>) =&gt;</span> obj !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span> &amp;&amp; !<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj),</span><br><span class="line">    <span class="attr">clone</span>: <span class="keyword">function</span> (<span class="params">obj, map = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.<span class="title function_">has</span>(obj)) <span class="keyword">return</span> map.<span class="title function_">get</span>(obj);</span><br><span class="line">            <span class="keyword">let</span> cloneObj = [];</span><br><span class="line">            map.<span class="title function_">set</span>(obj, cloneObj);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; obj.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                cloneObj[i] = <span class="variable language_">this</span>.<span class="title function_">clone</span>(obj[i], map);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> cloneObj;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> obj; <span class="comment">// 或者使用其他方法克隆函数</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isObject</span>(obj)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.<span class="title function_">has</span>(obj)) <span class="keyword">return</span> map.<span class="title function_">get</span>(obj);</span><br><span class="line">            <span class="keyword">let</span> cloneObj = &#123;&#125;;</span><br><span class="line">            map.<span class="title function_">set</span>(obj, cloneObj);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">                <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(k)) &#123;</span><br><span class="line">                    cloneObj[k] = <span class="variable language_">this</span>.<span class="title function_">clone</span>(obj[k], map);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> cloneObj;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">deepMerge</span>: <span class="keyword">function</span> (<span class="params">target, source, visited = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">            <span class="keyword">if</span> (source.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isObject</span>(source[key])) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (visited.<span class="title function_">has</span>(source[key])) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>; <span class="comment">// 避免循环引用</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    visited.<span class="title function_">set</span>(source[key], <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (!target[key] || !<span class="variable language_">this</span>.<span class="title function_">isObject</span>(target[key])) &#123;</span><br><span class="line">                        target[key] = &#123;&#125;;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">deepMerge</span>(target[key], source[key], visited);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    target[key] = source[key];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">getBaseOption</span>: <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">isObject</span>(config)) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;配置必须是对象&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">noDataTemplate</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> option = <span class="variable language_">this</span>.<span class="title function_">deepMerge</span>(<span class="variable language_">this</span>.<span class="title function_">clone</span>(<span class="variable language_">this</span>.<span class="property">baseTemplate</span>), config);</span><br><span class="line">        option.<span class="property">xAxis</span> = <span class="variable language_">this</span>.<span class="title function_">mergeAxes</span>(option.<span class="property">xAxis</span>);</span><br><span class="line">        option.<span class="property">yAxis</span> = <span class="variable language_">this</span>.<span class="title function_">mergeAxes</span>(option.<span class="property">yAxis</span>);</span><br><span class="line">        <span class="keyword">return</span> option;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">mergeAxes</span>: <span class="keyword">function</span> (<span class="params">axes</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(axes)) &#123;</span><br><span class="line">            <span class="keyword">return</span> axes.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">mergeAxis</span>(item));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">mergeAxis</span>(axes);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">mergeAxis</span>: <span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">isObject</span>(item)) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;坐标轴配置必须是对象&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (item.<span class="property">type</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;category&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">deepMerge</span>(<span class="variable language_">this</span>.<span class="title function_">clone</span>(<span class="variable language_">this</span>.<span class="property">categoryAxisTemplate</span>), item);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;value&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">deepMerge</span>(<span class="variable language_">this</span>.<span class="title function_">clone</span>(<span class="variable language_">this</span>.<span class="property">valueAxisTemplate</span>), item);</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;未知的坐标轴类型&quot;</span>, item);</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">deepMerge</span>(<span class="variable language_">this</span>.<span class="title function_">clone</span>(<span class="variable language_">this</span>.<span class="property">valueAxisTemplate</span>), item);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">getOption</span>: <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> option = <span class="variable language_">this</span>.<span class="title function_">getBaseOption</span>(config);</span><br><span class="line">        <span class="keyword">var</span> seriesConfig = option.<span class="property">series</span>;</span><br><span class="line">        <span class="keyword">var</span> series = [];</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(seriesConfig)) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;series配置必须是数组&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">noDataTemplate</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        seriesConfig.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> type = item.<span class="property">type</span> || <span class="string">&quot;line&quot;</span>;</span><br><span class="line">            <span class="keyword">var</span> templateKey = <span class="variable language_">this</span>.<span class="property">typeMapTemplate</span>[type];</span><br><span class="line">            <span class="keyword">if</span> (templateKey) &#123;</span><br><span class="line">                <span class="keyword">var</span> template = <span class="variable language_">this</span>[templateKey];</span><br><span class="line">                series.<span class="title function_">push</span>(</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">deepMerge</span>(<span class="variable language_">this</span>.<span class="title function_">clone</span>(template), item)</span><br><span class="line">                );</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                series.<span class="title function_">push</span>(item);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (series.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">noDataTemplate</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        option.<span class="property">series</span> = series;</span><br><span class="line">        <span class="keyword">return</span> option;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">baseTemplate</span>: &#123;</span><br><span class="line">        <span class="attr">legend</span>: &#123;</span><br><span class="line">            <span class="attr">itemWidth</span>: <span class="number">60</span>,</span><br><span class="line">            <span class="attr">itemHeight</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="attr">itemGap</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="attr">textStyle</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">                <span class="attr">fontSize</span>: <span class="number">40</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">padding</span>: [<span class="number">22</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">grid</span>: &#123;</span><br><span class="line">            <span class="attr">left</span>: <span class="number">100</span>,</span><br><span class="line">            <span class="attr">right</span>: <span class="number">100</span>,</span><br><span class="line">            <span class="attr">top</span>: <span class="number">100</span>,</span><br><span class="line">            <span class="attr">bottom</span>: <span class="number">100</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">yAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span>,</span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;rgba(0, 103, 138, 1)&#x27;</span>,</span><br><span class="line">            <span class="attr">textStyle</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#E7FCFF&#x27;</span>,</span><br><span class="line">                <span class="attr">fontSize</span>: <span class="number">32</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">borderWidth</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">axisPointer</span>: &#123;</span><br><span class="line">                <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;rgb(126,199,255)&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">valueAxisTemplate</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;value&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">alignTicks</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">splitLine</span>: &#123;</span><br><span class="line">            <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#1E4F79&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;dashed&#x27;</span>,</span><br><span class="line">                <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="number">32</span>,</span><br><span class="line">            <span class="attr">margin</span>: <span class="number">16</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">axisTick</span>: &#123;</span><br><span class="line">            <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">axisLine</span>: &#123;</span><br><span class="line">            <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#1E4F79&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;solid&#x27;</span>,</span><br><span class="line">                <span class="attr">width</span>: <span class="number">3</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">nameTextStyle</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="number">32</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">nameGap</span>: <span class="number">30</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">categoryAxisTemplate</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [],</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">splitLine</span>: &#123;</span><br><span class="line">            <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#1E4F79&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;dashed&#x27;</span>,</span><br><span class="line">                <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="number">32</span>,</span><br><span class="line">            <span class="attr">margin</span>: <span class="number">16</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">axisTick</span>: &#123;</span><br><span class="line">            <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">axisLine</span>: &#123;</span><br><span class="line">            <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#1E4F79&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;solid&#x27;</span>,</span><br><span class="line">                <span class="attr">width</span>: <span class="number">3</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">nameTextStyle</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="number">32</span>,</span><br><span class="line">            <span class="attr">verticalAlign</span>: <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">nameGap</span>: <span class="number">30</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">typeMapTemplate</span>: &#123;</span><br><span class="line">        <span class="string">&quot;line&quot;</span>: <span class="string">&quot;lineTemplate&quot;</span>,</span><br><span class="line">        <span class="string">&quot;bar&quot;</span>: <span class="string">&quot;barTemplate&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">lineTemplate</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">        <span class="attr">smooth</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">symbol</span>: <span class="string">&#x27;emptyCircle&#x27;</span>,</span><br><span class="line">        <span class="attr">symbolSize</span>: <span class="number">16</span>,</span><br><span class="line">        <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">4</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">barTemplate</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        <span class="attr">barWidth</span>: <span class="number">32</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">noDataTemplate</span>: &#123;</span><br><span class="line">        <span class="attr">graphic</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">            <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">            <span class="attr">top</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">            <span class="attr">style</span>: &#123;</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&#x27;暂无数据&#x27;</span>,</span><br><span class="line">                <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                <span class="attr">fill</span>: <span class="string">&#x27;#999&#x27;</span>,</span><br><span class="line">                <span class="attr">fontSize</span>: <span class="number">32</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><blockquote>
<p>按照echarts的写法写一个最简单的配置然后通过合并生成完整的option</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 示例配置</span></span><br><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">    <span class="attr">xAxis</span>: &#123;</span><br><span class="line">        <span class="attr">data</span>: [<span class="string">&#x27;Mon&#x27;</span>, <span class="string">&#x27;Tue&#x27;</span>, <span class="string">&#x27;Wed&#x27;</span>, <span class="string">&#x27;Thu&#x27;</span>, <span class="string">&#x27;Fri&#x27;</span>, <span class="string">&#x27;Sat&#x27;</span>, <span class="string">&#x27;Sun&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">series</span>: [&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: [<span class="number">120</span>, <span class="number">200</span>, <span class="number">150</span>, <span class="number">80</span>, <span class="number">70</span>, <span class="number">110</span>, <span class="number">130</span>]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取图表配置</span></span><br><span class="line"><span class="keyword">var</span> option = <span class="title class_">GenerateChart</span>.<span class="title function_">getOption</span>(config);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(option);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化图表</span></span><br><span class="line"><span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">myChart.<span class="title function_">setOption</span>(option);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/image/Echarts%E9%85%8D%E7%BD%AE%E7%94%9F%E6%88%90/1729067191689.png" alt="1729067191689"></p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><blockquote>
<p>如果不支持WeakMap的使用以下的函数，但是不能有循环引用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">clone</span>: <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; obj.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            cloneObj[i] = <span class="variable language_">this</span>.<span class="title function_">clone</span>(obj[i], map);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cloneObj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj; <span class="comment">// 或者使用其他方法克隆函数</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isObject</span>(obj)) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(k)) &#123;</span><br><span class="line">                cloneObj[k] = <span class="variable language_">this</span>.<span class="title function_">clone</span>(obj[k], map);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cloneObj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">deepMerge</span>: <span class="keyword">function</span> (<span class="params">target, source</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span> (source.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isObject</span>(source[key])) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!target[key] || !<span class="variable language_">this</span>.<span class="title function_">isObject</span>(target[key])) &#123;</span><br><span class="line">                    target[key] = &#123;&#125;;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">deepMerge</span>(target[key], source[key]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                target[key] = source[key];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ol>
<li><strong>灵活性高</strong><ul>
<li><strong>模板定制</strong> : 提供了多种图表模板，用户可以根据需要灵活定制和扩展。</li>
<li><strong>深度合并</strong> : <code>deepMerge</code> 方法支持深度合并对象，使得配置的组合和覆盖更加灵活。</li>
</ul>
</li>
<li><strong>功能强大</strong><ul>
<li><strong>克隆支持</strong> : <code>clone</code> 方法支持深度克隆对象，包括处理循环引用，确保配置对象的完整性。</li>
<li><strong>类型映射</strong> : <code>typeMapTemplate</code> 提供了图表类型的映射，简化了不同类型图表的配置生成。</li>
</ul>
</li>
<li><strong>易于使用</strong><ul>
<li><strong>接口简洁</strong> : echarts的文档就是该工具的文档。</li>
</ul>
</li>
<li><strong>扩展性强</strong><ul>
<li><strong>模块化设计</strong> : 工具采用模块化设计，便于扩展和维护。</li>
<li><strong>插件支持</strong> : 可以很容易地集成其他插件或工具，增强功能。</li>
</ul>
</li>
</ol>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ol>
<li><strong>性能开销</strong><ul>
<li><strong>深度克隆</strong> : 深度克隆和深度合并操作在处理大数据集时可能会有性能开销，需要谨慎使用。</li>
<li><strong>循环引用</strong> : 处理循环引用会增加额外的计算开销，可能影响性能。</li>
</ul>
</li>
<li><strong>复杂性</strong><ul>
<li><strong>配置复杂</strong> : 虽然提供了灵活性，但复杂的配置对象可能增加使用难度，需要用户深入理解配置结构。</li>
<li><strong>模板管理</strong> : 模板的管理和维护可能变得复杂，特别是当模板数量增加时。</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>组件</category>
        <category>前端</category>
      </categories>
      <tags>
        <tag>Echarts</tag>
        <tag>前端</tag>
        <tag>组件</tag>
      </tags>
  </entry>
  <entry>
    <title>云南出差见闻</title>
    <url>/2024/11/20/%E4%BA%91%E5%8D%97%E5%87%BA%E5%B7%AE%E8%A7%81%E9%97%BB/</url>
    <content><![CDATA[<h2 id="项目初版搭建"><a href="#项目初版搭建" class="headerlink" title="项目初版搭建"></a>项目初版搭建</h2><p>1、项目需要和虚拟机保持操作系统和jexus版本一致方便重现问题</p>
<p>2、更新至现场前需要将所有相关的进程全部停掉，重新启动后没有问题再将linux的程序更新至现场</p>
<p>3、初版的配置可由工程将现场参数传回后由研发配置</p>
<p>4、工程需要一些辅助工具或者脚本，如备份更新脚本 兼具回滚功能；图模数据校验工具</p>
<h2 id="linux常用命令"><a href="#linux常用命令" class="headerlink" title="linux常用命令"></a>linux常用命令</h2><h2 id="telnat"><a href="#telnat" class="headerlink" title="telnat"></a>telnat</h2>]]></content>
      <categories>
        <category>项目</category>
        <category>地理信息导航</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
      </tags>
  </entry>
  <entry>
    <title>项目功能清单</title>
    <url>/2024/11/20/%E9%A1%B9%E7%9B%AE%E5%8A%9F%E8%83%BD%E6%B8%85%E5%8D%95/</url>
    <content><![CDATA[<h2 id="项目注意事项"><a href="#项目注意事项" class="headerlink" title="项目注意事项"></a>项目注意事项</h2><h3 id="供电路径"><a href="#供电路径" class="headerlink" title="供电路径"></a>供电路径</h3><ol>
<li>接线图供电路径整体为 网页发送websocket消息至花海燕服务 ，花海燕服务为消息转发  ，花海燕消息转发给张聪的服务进行计算，将结果返回给花海燕服务再返回给页面</li>
<li>花海燕服务 有三个端口  第一个和网页交互的端口 IP要设置为 <code>0.0.0.0</code> 剩余两个端口是和张聪的服务做交互  其ip要设置为127.0.0.1  或者真实IP，该服务 server  和client   要和张聪的服务IP做交叉</li>
<li>花海燕服务下有两个exe   AI开头的带有[[[]]]]三个方括号的标识符   Web开头的没有携带标识符</li>
<li>张聪的服务需要标识符才能接收到消息</li>
<li>张聪的服务启动很耗费时间只有其完全将数据读入内存后才能正常提供服务。</li>
<li>两个服务的消息接受转发都记录在SK开头的日志，张聪的服务是否启动的日志是NORMAL开头</li>
</ol>
<h3 id="供电路径调试记录"><a href="#供电路径调试记录" class="headerlink" title="供电路径调试记录"></a>供电路径调试记录</h3><p>1、调试消息交互按照消息的传递路径一个节点一个节点的验证，验证顺序为1、收到消息这一动作是否执行，2、收到的消息格式是否正确3、是否对收到的消息做了正确的响应。</p>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><ul>
<li><code>127.0.0.1</code> 是本地回环地址，仅用于本机通信 （任何发送到 <code>127.0.0.1</code> 的网络请求都不会发送到外部网络，而是会回送到本机。）。</li>
<li><code>0.0.0.0</code> 是一个通配符地址，允许服务接受所有地址的连接 （当一个服务绑定到 <code>0.0.0.0</code> 时，意味着它将监听来自所有可用IP地址的请求，而不仅仅是本机请求）。</li>
<li>实际IP是设备在网络中的唯一标识，用于进行外部通信（与 <code>127.0.0.1</code> 和 <code>0.0.0.0</code> 的区别在于，实际IP是分配给特定设备的，可以是动态或静态的，而前两者是特殊用途的地址）。</li>
</ul>
<blockquote>
<p>如果你的服务需要接受来自不同主机的 WebSocket 消息，那么将服务的监听 IP 设置为 <code>0.0.0.0</code> 是一个合适的选择。</p>
</blockquote>
]]></content>
      <categories>
        <category>项目</category>
      </categories>
      <tags>
        <tag>清单</tag>
        <tag>经验</tag>
        <tag>注意事项</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql常用命令</title>
    <url>/2024/11/05/Mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h3 id="1-数据操作"><a href="#1-数据操作" class="headerlink" title="1. 数据操作"></a>1. 数据操作</h3><h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INSERT INTO table_name (column1, column2, column3, ...)</span><br><span class="line">VALUES (value1, value2, value3, ...);</span><br></pre></td></tr></table></figure>

<h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT column1, column2, ...</span><br><span class="line">FROM table_name</span><br><span class="line">WHERE condition;</span><br></pre></td></tr></table></figure>

<h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE table_name</span><br><span class="line">SET column1 = value1, column2 = value2, ...</span><br><span class="line">WHERE condition;</span><br></pre></td></tr></table></figure>

<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE FROM table_name</span><br><span class="line">WHERE condition;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h3 id="2-数据库操作"><a href="#2-数据库操作" class="headerlink" title="2. 数据库操作"></a>2. 数据库操作</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE database_name;</span><br></pre></td></tr></table></figure>

<h4 id="查看所有数据库"><a href="#查看所有数据库" class="headerlink" title="查看所有数据库"></a>查看所有数据库</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure>

<h4 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">USE database_name;</span><br></pre></td></tr></table></figure>

<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP DATABASE database_name;</span><br></pre></td></tr></table></figure>

<h3 id="3-表操作"><a href="#3-表操作" class="headerlink" title="3. 表操作"></a>3. 表操作</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE table_name (</span><br><span class="line">    column1 datatype,</span><br><span class="line">    column2 datatype,</span><br><span class="line">    column3 datatype,</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DESCRIBE table_name;</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW COLUMNS FROM table_name;</span><br></pre></td></tr></table></figure>

<h4 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h4><p>添加列：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name ADD column_name datatype;</span><br></pre></td></tr></table></figure>

<p>修改列：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name MODIFY column_name new_datatype;</span><br></pre></td></tr></table></figure>

<p>删除列：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name DROP COLUMN column_name;</span><br></pre></td></tr></table></figure>

<h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP TABLE table_name;</span><br></pre></td></tr></table></figure>

<h3 id="4-用户管理"><a href="#4-用户管理" class="headerlink" title="4. 用户管理"></a>4. 用户管理</h3><h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE USER &#x27;username&#x27;@&#x27;host&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP USER &#x27;username&#x27;@&#x27;host&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="查看所有用户"><a href="#查看所有用户" class="headerlink" title="查看所有用户"></a>查看所有用户</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT User FROM mysql.user;</span><br></pre></td></tr></table></figure>

<h3 id="5-权限管理"><a href="#5-权限管理" class="headerlink" title="5. 权限管理"></a>5. 权限管理</h3><h4 id="授予权限"><a href="#授予权限" class="headerlink" title="授予权限"></a>授予权限</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GRANT privilege_type ON database_name.table_name TO &#x27;username&#x27;@&#x27;host&#x27;;</span><br></pre></td></tr></table></figure>

<p>例如授予用户对某个数据库的所有权限：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON database_name.* TO &#x27;username&#x27;@&#x27;host&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="撤消权限"><a href="#撤消权限" class="headerlink" title="撤消权限"></a>撤消权限</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REVOKE privilege_type ON database_name.table_name FROM &#x27;username&#x27;@&#x27;host&#x27;;</span><br></pre></td></tr></table></figure>

<p>例如撤消用户对某个数据库的所有权限：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REVOKE ALL PRIVILEGES ON database_name.* FROM &#x27;username&#x27;@&#x27;host&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="刷新权限"><a href="#刷新权限" class="headerlink" title="刷新权限"></a>刷新权限</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<h3 id="6-其他常用命令"><a href="#6-其他常用命令" class="headerlink" title="6. 其他常用命令"></a>6. 其他常用命令</h3><h4 id="显示当前用户"><a href="#显示当前用户" class="headerlink" title="显示当前用户"></a>显示当前用户</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT CURRENT_USER();</span><br></pre></td></tr></table></figure>

<h4 id="显示当前数据库"><a href="#显示当前数据库" class="headerlink" title="显示当前数据库"></a>显示当前数据库</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure>

<h4 id="显示所有表"><a href="#显示所有表" class="headerlink" title="显示所有表"></a>显示所有表</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW TABLES;</span><br></pre></td></tr></table></figure>

<h4 id="显示服务器状态"><a href="#显示服务器状态" class="headerlink" title="显示服务器状态"></a>显示服务器状态</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW STATUS;</span><br></pre></td></tr></table></figure>

<h4 id="显示系统变量"><a href="#显示系统变量" class="headerlink" title="显示系统变量"></a>显示系统变量</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW VARIABLES;</span><br></pre></td></tr></table></figure>

<h3 id="7-其他"><a href="#7-其他" class="headerlink" title="7.其他"></a>7.其他</h3><h4 id="显示建表SQL脚本"><a href="#显示建表SQL脚本" class="headerlink" title="显示建表SQL脚本"></a>显示建表SQL脚本</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ys_db.tbmoduleinfo2;</span><br></pre></td></tr></table></figure>

<h4 id="显示创建视图SQL脚本"><a href="#显示创建视图SQL脚本" class="headerlink" title="显示创建视图SQL脚本"></a>显示创建视图SQL脚本</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">CREATE</span> <span class="keyword">view</span> ys_db.v_normaluser;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>数据库</category>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>命令</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo使用说明</title>
    <url>/2024/10/15/hexo%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/</url>
    <content><![CDATA[<h1 id="命令总结"><a href="#命令总结" class="headerlink" title="命令总结"></a>命令总结</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">hexo new [layout] &lt;title&gt; # 生成新文章</span><br><span class="line">hexo g	#markdown渲染html</span><br><span class="line">hexo s #打开本地服务</span><br><span class="line">hexo d #推送至github</span><br><span class="line">hexo S --draft #本机预览草稿</span><br><span class="line">hexo P &lt;filename&gt; #草稿发布为正式文章</span><br><span class="line">npm run local #本机预览服务 包含草稿</span><br><span class="line">npm run sync #自定义更新指令</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h1 id="创建一片文章"><a href="#创建一片文章" class="headerlink" title="创建一片文章"></a>创建一片文章</h1><ol>
<li><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>优点:自动生成一些标记</li>
<li>缺点：需要手动切换至对应文件编辑</li>
</ul>
<blockquote>
<p>layout :<code>post</code>、<code>page</code> 和 <code>draft</code> ；<code>page</code>就是在Source下生成对应的文件夹然后生成一个index.md文件,另外两个就是生成对应文件夹 并且生成新的markdown文件名称</p>
</blockquote>
</li>
<li><p>自定义layout</p>
<blockquote>
<p>layout，自定义的位于 scaffolds文件下 , 用于定义一些Front-matter  和模板内容</p>
</blockquote>
</li>
<li><p>使用自定义layout</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new custom_template &quot;根据自定义模板生成文章&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>\source\_posts 文件夹下直接创建markdown文件</p>
<ul>
<li>优点: 避免繁琐的命令</li>
<li>缺点:Front-matter需要手动书写</li>
</ul>
</li>
</ol>
<h1 id="阅读更多链接"><a href="#阅读更多链接" class="headerlink" title="阅读更多链接"></a>阅读更多链接</h1><p><code>&lt;!-- more --&gt;</code>前的内容被展示 剩下的点击<strong>阅读全文</strong>展示</p>
<h1 id="嵌入图片"><a href="#嵌入图片" class="headerlink" title="嵌入图片"></a>嵌入图片</h1><p><strong>思路：</strong></p>
<ol>
<li>hexo 的工作本质就是将markdown 转成 html  ,所以最终展示 图片按照 image标签的规则来即可；</li>
<li>我使用的markdown插件为<strong>Office Viewer(Markdown Editor)</strong> 可以直接插入图片 它会在文章同级生成 <code>/image/[文章名称]/[图片名称].png</code>如 <code>source\_posts\image\Echarts配置生成\1729064676610.png</code> ，并且编译出来的image的url为绝对路径，所以我需要让——post下的image文件夹copy到 public文件夹下。</li>
<li>由于未找到自定义配置如何实现  所以通过自定义脚本来实现，根路径下创建自定义任务 <code>copy_images.js</code>内容如下</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs-extra&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义源路径和目标路径</span></span><br><span class="line"><span class="keyword">const</span> sourcePath = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;source/_posts/image&#x27;</span>); <span class="comment">// 源文件夹路径</span></span><br><span class="line"><span class="keyword">const</span> destPath = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;public/image&#x27;</span>); <span class="comment">// 目标文件夹路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断源文件夹是否存在</span></span><br><span class="line"><span class="keyword">if</span> (!fs.<span class="title function_">existsSync</span>(sourcePath)) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 复制文件</span></span><br><span class="line">fs.<span class="title function_">copy</span>(sourcePath, destPath)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;source/_posts/image copied to public/image successfully!&#x27;</span>))</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;复制过程中出现错误:&#x27;</span>, err.<span class="property">message</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="4">
<li><code>package.json</code> 设置自定义脚本</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;after_build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node copy_images.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>由于执行比较麻烦可以将命令合并,一次执行 发布、图片拷贝、同步远程</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;after_build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node copy_images.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;sync&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate &amp;&amp; node copy_images.js &amp;&amp; hexo deploy&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://fuguigui.github.io/hexo2/">一次完整的Hexo写作流程</a></p>
<p><a href="https://hexo.io/zh-cn/">hexo官方文档</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>教程</tag>
      </tags>
  </entry>
  <entry>
    <title>PDP2.0类</title>
    <url>/2024/12/06/PDP2.0%E7%B1%BB/</url>
    <content><![CDATA[<h2 id="读取XML"><a href="#读取XML" class="headerlink" title="读取XML"></a>读取XML</h2><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Linger.Common.XmlHelper xml = <span class="keyword">new</span> Linger.Common.XmlHelper(<span class="string">&quot;environment.xml&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> current = xml.GetNodeValue(<span class="string">&quot;CURRENT&quot;</span>).Trim();</span><br><span class="line">XmlNode currentConfig = xml.GetXmlNode(current);</span><br><span class="line">mapUrl = xml.GetNodeValue(current+ <span class="string">&quot;/MPA_URL&quot;</span>).Trim();</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>new Linger.Common.XmlHelper(&quot;environment.xml&quot;);</code>读取固定路径 &#x2F;App_Data&#x2F;下的文件</p>
<p><code>environment.xml</code> 也可以拼路径 如 <code>load/environment.xml</code>就是读&#x2F;App_Data&#x2F;load&#x2F;environment.xml文件</p>
<p>读取文件下的执行节点可以传相对路径</p>
<p>读取CDATA内的值使用xml.GetNodeValue(“CURRENT”)</p>
</blockquote>
]]></content>
      <categories>
        <category>框架</category>
        <category>PDP2</category>
      </categories>
      <tags>
        <tag>PDP2</tag>
        <tag>经验</tag>
      </tags>
  </entry>
  <entry>
    <title>iview组件记录</title>
    <url>/2025/01/08/iview%E7%BB%84%E4%BB%B6%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h2 id="表格单击行选中"><a href="#表格单击行选中" class="headerlink" title="表格单击行选中"></a>表格单击行选中</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> time = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">var</span> timeOut = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">onRowClick</span> = <span class="keyword">function</span> (<span class="params">row, index</span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeOut);</span><br><span class="line">    timeOut = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (row.<span class="property">_disabled</span> != <span class="literal">undefined</span> &amp;&amp; row.<span class="property">_disabled</span> == <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pdp.<span class="property">$refs</span>.<span class="property">configtable</span>.<span class="title function_">toggleSelect</span>(index);</span><br><span class="line">    &#125;, time)</span><br><span class="line">&#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>组件</category>
      </categories>
      <tags>
        <tag>iview</tag>
      </tags>
  </entry>
  <entry>
    <title>js代码片段</title>
    <url>/2024/11/07/js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/</url>
    <content><![CDATA[<h2 id="前端编码"><a href="#前端编码" class="headerlink" title="前端编码"></a>前端编码</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">encodeURIComponent	decodeURIComponent</span><br><span class="line">encodeURI			decodeURI</span><br><span class="line">escape				unescape</span><br></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>encodeURIComponent()和decodeURIComponent()：用于编码和解码URL中的参数部分，包括保留字符和中文字符。在编码过程中，保留字符会被转换为它们的十六进制转义序列，以避免与URL语法发生冲突；中文字符会被编码为UTF-8字符集下的十六进制编码，以便在URL中安全使用。</li>
<li>encodeURI()和decodeURI()：用于编码和解码整个URL，但是，不会进行对特殊字符（例如冒号、斜杠、问号等）的编码。这些方法主要用于编码URL本身，而不是参数部分。</li>
<li>escape()和unescape()：用于编码和解码字符串中的Unicode字符。但是，由于这些方法不适用于所有字符，现在很少使用。</li>
</ol>
</blockquote>
<span id="more"></span>
<h2 id="未加载图片显示备用图片"><a href="#未加载图片显示备用图片" class="headerlink" title="未加载图片显示备用图片"></a>未加载图片显示备用图片</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/i/t.png&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;this.src = &#x27;/i/sgc/shengchan/no_img.png&#x27;;this.onerror = null;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">img</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现思路是获取不到图片时会触发onerror 函数，在该函数内将src改为指定的图片。为了避免error指定的图片也拿不到从而陷入死循环将this.onerror &#x3D; null ;注销回调函数</p>
</blockquote>
<h2 id="判断一个地址能否拿到图片"><a href="#判断一个地址能否拿到图片" class="headerlink" title="判断一个地址能否拿到图片"></a>判断一个地址能否拿到图片</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkImgExist</span>  (<span class="params">src, successCallback, errorCallback</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>()</span><br><span class="line">    img.<span class="property">src</span> = src</span><br><span class="line">    img.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">successCallback</span>(src);</span><br><span class="line">    &#125;</span><br><span class="line">    img.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">errorCallback</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">successCallback</span>(<span class="params">src</span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(src,<span class="string">&quot;能够获取到图片&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">errorCallback</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取不到图片&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="图片中文名处理"><a href="#图片中文名处理" class="headerlink" title="图片中文名处理"></a>图片中文名处理</h2><h3 id="前端部分处理"><a href="#前端部分处理" class="headerlink" title="前端部分处理"></a>前端部分处理</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> imgName = <span class="string">&quot;中文名图片.png&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;/i/sgc/shengchan/linedefect/&quot;</span> + <span class="built_in">encodeURIComponent</span>(imgName)</span><br></pre></td></tr></table></figure>

<p>对中文部分通过encodeURIComponent转为utf-8</p>
<h3 id="服务器部分"><a href="#服务器部分" class="headerlink" title="服务器部分"></a>服务器部分</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export MONO_EXTERNAL_ENCODINGS=gbk</span><br></pre></td></tr></table></figure>

<p>在 &#x2F;usr&#x2F;jexus&#x2F;jws 加上上方的</p>
<blockquote>
<p>linux服务器，华北生技线路缺陷使用</p>
</blockquote>
<h2 id="水印"><a href="#水印" class="headerlink" title="水印"></a>水印</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">canvasWaterMark</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">    container = <span class="variable language_">document</span>.body,</span></span><br><span class="line"><span class="params">    width = <span class="number">300</span>,</span></span><br><span class="line"><span class="params">    height = <span class="number">300</span>,</span></span><br><span class="line"><span class="params">    textAlign = <span class="string">&#x27;center&#x27;</span>,</span></span><br><span class="line"><span class="params">    textBaseline = <span class="string">&#x27;middle&#x27;</span>,</span></span><br><span class="line"><span class="params">    alpha = <span class="number">0.3</span>,</span></span><br><span class="line"><span class="params">    font = <span class="string">&#x27;20px monaco, microsoft yahei&#x27;</span>,</span></span><br><span class="line"><span class="params">    fillStyle = <span class="string">&#x27;rgba(184, 184, 184, 0.8)&#x27;</span>,</span></span><br><span class="line"><span class="params">    content = <span class="string">&#x27;JumpServer&#x27;</span>,</span></span><br><span class="line"><span class="params">    rotate = -<span class="number">45</span>,</span></span><br><span class="line"><span class="params">    zIndex = <span class="number">1000</span></span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    canvas.<span class="property">width</span> = width;</span><br><span class="line">    canvas.<span class="property">height</span> = height;</span><br><span class="line">    ctx.<span class="property">globalAlpha</span> = <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line">    ctx.<span class="property">font</span> = font;</span><br><span class="line">    ctx.<span class="property">fillStyle</span> = fillStyle;</span><br><span class="line">    ctx.<span class="property">textAlign</span> = textAlign;</span><br><span class="line">    ctx.<span class="property">textBaseline</span> = textBaseline;</span><br><span class="line">    ctx.<span class="property">globalAlpha</span> = alpha;</span><br><span class="line"></span><br><span class="line">    ctx.<span class="title function_">translate</span>(<span class="number">0.5</span> * width, <span class="number">0.5</span> * height);</span><br><span class="line">    ctx.<span class="title function_">rotate</span>((rotate * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">generateMultiLineText</span>(<span class="params">_ctx, _text, _width, _lineHeight</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> words = _text.<span class="title function_">split</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> line = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">const</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> n = <span class="number">0</span>; n &lt; words.<span class="property">length</span>; n++) &#123;</span><br><span class="line">            line = words[n];</span><br><span class="line">            line = <span class="title function_">truncateCenter</span>(line, <span class="number">25</span>);</span><br><span class="line">            _ctx.<span class="title function_">fillText</span>(line, x, y);</span><br><span class="line">            y += _lineHeight;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">generateMultiLineText</span>(ctx, content, width, <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> base64Url = canvas.<span class="title function_">toDataURL</span>();</span><br><span class="line">    <span class="keyword">const</span> watermarkDiv = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    watermarkDiv.<span class="title function_">setAttribute</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">`</span></span><br><span class="line"><span class="string">            position:absolute;</span></span><br><span class="line"><span class="string">            top:0;</span></span><br><span class="line"><span class="string">            left:0;</span></span><br><span class="line"><span class="string">            width:100%;</span></span><br><span class="line"><span class="string">            height:100%;</span></span><br><span class="line"><span class="string">            z-index:<span class="subst">$&#123;zIndex&#125;</span>;</span></span><br><span class="line"><span class="string">            pointer-events:none;</span></span><br><span class="line"><span class="string">            background-repeat:repeat;</span></span><br><span class="line"><span class="string">            background-image:url(&#x27;<span class="subst">$&#123;base64Url&#125;</span>&#x27;)`</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    container.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;relative&#x27;</span>;</span><br><span class="line">    container.<span class="title function_">insertBefore</span>(watermarkDiv, container.<span class="property">firstChild</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">truncateCenter</span>(<span class="params">s, l</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.<span class="property">length</span> &lt;= l) &#123;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> centerIndex = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(l / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> s.<span class="title function_">slice</span>(<span class="number">0</span>, centerIndex - <span class="number">2</span>) + <span class="string">&#x27;...&#x27;</span> + s.<span class="title function_">slice</span>(centerIndex + <span class="number">1</span>, l);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="鼠标滚动横向滚动条"><a href="#鼠标滚动横向滚动条" class="headerlink" title="鼠标滚动横向滚动条"></a>鼠标滚动横向滚动条</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//设置overflow: auto;属性的div的DOM对象</span></span><br><span class="line">varselectDom =  <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">selectRef</span>;</span><br><span class="line"><span class="comment">//添加滚轮事件</span></span><br><span class="line">selectDom.<span class="title function_">addEventListener</span>(<span class="string">&#x27;wheel&#x27;</span>,<span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//组织默认行为</span></span><br><span class="line">    event.<span class="title function_">preventDefault</span>()</span><br><span class="line">    <span class="comment">//将下滚的距离增加到距左边的距离</span></span><br><span class="line">    selectDom.<span class="property">scrollLeft</span> += <span class="number">10</span>*event.<span class="property">deltaY</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="全屏"><a href="#全屏" class="headerlink" title="全屏"></a>全屏</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">screenFull</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//要全屏的DOM对象，可以用vue的this.$refs 或 原生 document.get...方法</span></span><br><span class="line">    vardom = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">videoContainer</span>;</span><br><span class="line">    <span class="comment">// 未全屏</span></span><br><span class="line">    <span class="comment">//用来判断当前是否全屏，一定是在document对象下判断</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">document</span>.<span class="property">fullscreenElement</span>) &#123;</span><br><span class="line">        <span class="comment">//这个是要放大的元素调用全屏方法</span></span><br><span class="line">        dom.<span class="title function_">requestFullscreen</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//一定要document调用退出全屏方法</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">document</span>.<span class="title function_">exitFullscreen</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="video"><a href="#video" class="headerlink" title="video"></a>video</h2><h3 id="隐藏原生组件"><a href="#隐藏原生组件" class="headerlink" title="隐藏原生组件"></a>隐藏原生组件</h3><table>
<thead>
<tr>
<th>功能</th>
<th>代码</th>
</tr>
</thead>
<tbody><tr>
<td>禁用全屏</td>
<td>controlslist&#x3D;”nofullscreen”</td>
</tr>
<tr>
<td>隐藏倍速播放</td>
<td>controlslist&#x3D;”noplaybackrate”</td>
</tr>
<tr>
<td>隐藏下载</td>
<td>controlslist&#x3D;”nodownload”</td>
</tr>
<tr>
<td>隐藏远程播放</td>
<td>controlslist&#x3D;”noremoteplayback”</td>
</tr>
<tr>
<td>隐藏画中画</td>
<td>disablePictureInPicture&#x3D;”true”</td>
</tr>
<tr>
<td>隐藏右键</td>
<td>oncontextmenu&#x3D;”return false”</td>
</tr>
<tr>
<td></td>
<td><code>-internal</code>开头的样式这样改不了</td>
</tr>
<tr>
<td>隐藏全屏</td>
<td>video::-webkit-media-controls-fullscreen-button{display:none;}</td>
</tr>
<tr>
<td>隐藏播放按钮</td>
<td>video::-webkit-media-controls-play-button{display:none;}</td>
</tr>
<tr>
<td>隐藏音量按钮</td>
<td>video::-webkit-media-controls-volume-control-container{display:none;}</td>
</tr>
<tr>
<td>隐藏进度条</td>
<td>video::-webkit-media-controls-timeline{display:none;}</td>
</tr>
</tbody></table>
<blockquote>
<p>要显示video详细的内部标签，需要打开 <strong>显示用户代理shadow DOM</strong></p>
<p>noplaybackrate 在MDN上没显示</p>
<p>将画中画，下载，倍数功能全部去掉后三个点也就去掉了</p>
</blockquote>
<p>参考： <a href="https://juejin.cn/post/7202174759999766587">原生 audio, video 标签 controls 的修改 - 掘金 (juejin.cn)</a></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;br&gt;&lt;br&gt;&lt;br&gt;//全屏按钮</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-fullscreen-button &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line">//播放按钮</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-play-button &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line">//进度条</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-timeline &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line">//观看的当前时间</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-current-time-display&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;         </span><br><span class="line">&#125;</span><br><span class="line">//剩余时间</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-time-remaining-display &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;         </span><br><span class="line">&#125;</span><br><span class="line">//音量按钮</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-mute-button &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;         </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-toggle-closed-captions-button &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;         </span><br><span class="line">&#125;</span><br><span class="line">//音量的控制条</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-volume-slider &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;         </span><br><span class="line">&#125;</span><br><span class="line">//所有控件</span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-enclosure&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="前端视频加文字信息"><a href="#前端视频加文字信息" class="headerlink" title="前端视频加文字信息"></a>前端视频加文字信息</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">desc</span>=<span class="string">&quot;视频区&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;height:calc(100% - 60px);&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;f jc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">style</span>=<span class="string">&quot;object-fit: contain;height:100%;max-width:100vw&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;videoRef&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">controlslist</span>=<span class="string">&quot;nodownload nofullscreen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sa</span> <span class="attr">controls</span>=<span class="string">&quot;true&quot;</span> <span class="attr">playsinline</span>=<span class="string">&quot;true&quot;</span> <span class="attr">disablePictureInPicture</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">sa</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;a src=&quot;/replay/rain.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/a&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sa</span> <span class="attr">src</span>=<span class="string">&quot;videoSrc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">sa</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute;top:20px;left:20px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;watermark&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sa</span> <span class="attr">value</span>=<span class="string">&quot;this.watermarkInfo.worker&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">sa</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;watermark&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sa</span> <span class="attr">value</span>=<span class="string">&quot;this.watermarkInfo.auditor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">sa</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意点：</strong></p>
<p>1、video标签要和水印信息标签平级</p>
<p>2、video标签父元素要由video内容撑开，不能设置width，height，要让其紧密贴合video，才能使水印位置正常</p>
<p>3、video 标签要对宽高的最大值做限定不然，全屏后会出现bug</p>
<p>4、全屏需要手动对其父元素进行全屏才能包含水印。</p>
]]></content>
      <categories>
        <category>工具</category>
        <category>前端</category>
      </categories>
      <tags>
        <tag>功能片段</tag>
        <tag>工具</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>电网知识</title>
    <url>/2024/10/18/%E7%94%B5%E7%BD%91%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://www.dlzstp.com/entry">电知网</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/538591681">电力知识图谱：网络安全分区</a></p>
<p><a href="https://www.zhihu.com/column/c_1193928849044598784">能源信息化专栏</a></p>
<span id="more"></span>

<h1 id="网络分区"><a href="#网络分区" class="headerlink" title="网络分区"></a>网络分区</h1><p>总的有6个区，电力内网I-IV区+互联网大区+外网区</p>
<p>根据电力 二次系统的特点，划分为生产控制大区和管理信息大区。生产控制大区 分为控制区（安全区Ⅰ）和非控制区（安全区Ⅱ）。信息管理大区分为生产管理区（安全区Ⅲ）和管理信息区（安全区Ⅳ）。</p>
]]></content>
      <categories>
        <category>电网</category>
      </categories>
      <tags>
        <tag>电网</tag>
        <tag>业务</tag>
      </tags>
  </entry>
  <entry>
    <title>跨域</title>
    <url>/2024/11/08/%E8%B7%A8%E5%9F%9F/</url>
    <content><![CDATA[<h2 id="Cookie-Session-Token"><a href="#Cookie-Session-Token" class="headerlink" title="Cookie Session Token"></a>Cookie Session Token</h2><blockquote>
<p>三者都是由于http无状态属性 ，但是为了方便使用识别用户状态 ，所以需要每次请求带上标识符，标识符目前有三个版本 <code>Cookie </code> <code>Session</code> <code>Token</code></p>
</blockquote>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><blockquote>
<p>目前是将其作为 传递唯一标识的手段 </p>
</blockquote>
<p>特性：</p>
<ol>
<li>4KB限制</li>
<li>可被修改</li>
</ol>
<p>获取：</p>
<p>设置：</p>
<p>传递：</p>
<h2 id="跨域的概念"><a href="#跨域的概念" class="headerlink" title="跨域的概念"></a>跨域的概念</h2><h2 id="跨域对于cookie的影响"><a href="#跨域对于cookie的影响" class="headerlink" title="跨域对于cookie的影响"></a>跨域对于cookie的影响</h2><h2 id="跨域处理方法"><a href="#跨域处理方法" class="headerlink" title="跨域处理方法"></a>跨域处理方法</h2><p>代理</p>
<h2 id="浏览器权限限制总结"><a href="#浏览器权限限制总结" class="headerlink" title="浏览器权限限制总结"></a>浏览器权限限制总结</h2>]]></content>
      <categories>
        <category>前端</category>
        <category>浏览器</category>
      </categories>
      <tags>
        <tag>笔记</tag>
        <tag>浏览器</tag>
        <tag>跨域</tag>
      </tags>
  </entry>
  <entry>
    <title>vue2踩坑记录</title>
    <url>/2024/10/17/vue2%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h1 id="v-show失效"><a href="#v-show失效" class="headerlink" title="v-show失效"></a>v-show失效</h1><p>components\拖拽折线\index.html   拖拽组件右键菜单部分v-show 和flex同存则不生效 ，但是其他方式却无法复现这一问题</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;contextmenuRef&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;showContextMenu&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute;display:flex;&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;saveDiff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>问题</strong>: <code>v-show</code>和 行内样式 <code>display:flex</code>同时设置在一个标签上 <code>v-show</code>不生效</p>
<p><strong>原因：</strong>未知，并且无法复现</p>
<p><strong>解决方案</strong>：样式使用class或者v-show提高一层</p>
]]></content>
      <categories>
        <category>前端</category>
        <category>vue</category>
      </categories>
      <tags>
        <tag>经验</tag>
        <tag>笔记</tag>
        <tag>vue</tag>
        <tag>bug</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux学习笔记</title>
    <url>/2024/12/02/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="启动过程"><a href="#启动过程" class="headerlink" title="启动过程"></a>启动过程</h2><ul>
<li>内核的引导。</li>
<li>运行 init。</li>
<li>系统初始化。</li>
<li>建立终端 。</li>
<li>用户登录系统。</li>
</ul>
]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>笔记</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux常用命令</title>
    <url>/2024/12/02/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="ps-当前进程状态查询"><a href="#ps-当前进程状态查询" class="headerlink" title="ps 当前进程状态查询"></a>ps 当前进程状态查询</h3><blockquote>
<p>process status:用于显示当前进程的状态，类似于 windows 的任务管理器。</p>
</blockquote>
<p><a href="https://www.runoob.com/linux/linux-comm-ps.html">Linux ps 命令</a></p>
<p><strong>例子：</strong></p>
<p><code>ps aux | grep mono</code> 查询mono进程</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>USER</td>
<td>运行进程的用户名</td>
</tr>
<tr>
<td>PID</td>
<td>进程ID，即进程的唯一标识符</td>
</tr>
<tr>
<td>%CPU</td>
<td>进程占用的 CPU 使用率</td>
</tr>
<tr>
<td>%MEM</td>
<td>进程占用的物理内存百分比</td>
</tr>
<tr>
<td>VSZ</td>
<td>进程使用的虚拟内存大小（以 KB 为单位）</td>
</tr>
<tr>
<td>RSS</td>
<td>进程使用的驻留集大小，即实际物理内存占用（以 KB 为单位）</td>
</tr>
<tr>
<td>TTY</td>
<td>启动进程的终端名。? 表示没有关联的终端</td>
</tr>
<tr>
<td>STAT</td>
<td>进程状态，例如 S (sleeping)，R (running)，Z (zombie) 等</td>
</tr>
<tr>
<td>START</td>
<td>进程启动时间</td>
</tr>
<tr>
<td>TIME</td>
<td>进程占用的 CPU 时间</td>
</tr>
<tr>
<td>COMMAND</td>
<td>启动进程的命令行</td>
</tr>
</tbody></table>
<h3 id="查看文件"><a href="#查看文件" class="headerlink" title="查看文件"></a>查看文件</h3><h4 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h4><p><a href="https://www.runoob.com/linux/linux-comm-cat.html">Linux cat 命令 </a></p>
<p><code>cat -n filename</code> 查看文件内容 并且 显示行号</p>
<h4 id="less"><a href="#less" class="headerlink" title="less"></a>less</h4><p><a href="https://www.runoob.com/linux/linux-comm-less.html">Linux less 命令 </a></p>
<h2 id="进程启动"><a href="#进程启动" class="headerlink" title="进程启动"></a>进程启动</h2><p><a href="https://www.runoob.com/linux/linux-comm-nohup.html">Linux nohup 命令</a></p>
<p><strong>判断当前系统是哪种初始化信通</strong></p>
<p><code>ps -p 1 -o comm=</code></p>
<p><strong>SysVinit</strong> 或 <strong>systemd</strong></p>
<blockquote>
<p><code>service_name</code>  可以通过  ps -p <code>&lt;pid&gt;</code> -o comm&#x3D;  来查询</p>
</blockquote>
<h4 id="停止进程"><a href="#停止进程" class="headerlink" title="停止进程"></a>停止进程</h4><table>
<thead>
<tr>
<th>类型</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>systemd</td>
<td>systemctl stop <service_name></td>
<td></td>
</tr>
<tr>
<td>SysVinit</td>
<td>service <service_name> start</td>
<td></td>
</tr>
<tr>
<td></td>
<td>kill <code>&lt;pid&gt;</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="启动进程"><a href="#启动进程" class="headerlink" title="启动进程"></a>启动进程</h4><blockquote>
<p><code>nohup /root/runoob.sh &amp;</code>  <code>&amp;</code>让命令在后台执行</p>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>systemd</td>
<td>systemctl start <service_name></td>
<td></td>
</tr>
<tr>
<td>SysVinit</td>
<td>service <service_name> start</td>
<td></td>
</tr>
<tr>
<td></td>
<td>nohup command &amp;</td>
<td></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>命令</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>网络学习笔记</title>
    <url>/2024/12/03/%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="IP-子网掩码-路由-网关"><a href="#IP-子网掩码-路由-网关" class="headerlink" title="IP 子网掩码 路由 网关"></a>IP 子网掩码 路由 网关</h2><h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><blockquote>
<p>唯一标识 IP4  32位</p>
</blockquote>
<h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><blockquote>
<p>子网掩码是一个32位的二进制值，用于将一个IP地址划分为网络部分和主机部分。</p>
<p>192.168.1.10 &amp; 255.255.255.0 &#x3D; 192.168.1.0<br>192.168.1.20 &amp; 255.255.255.0 &#x3D; 192.168.1.0</p>
<p>同一网段的可以直接通信</p>
</blockquote>
<p><strong>子网的作用：</strong></p>
<ol>
<li><strong>提高效率</strong> ：通过将网络划分为较小的子网，可以减少广播域的大小，从而减少网络拥塞和提高网络效率。</li>
<li><strong>简化管理</strong> ：较小的子网使得网络的管理更加简单。例如，如果网络被划分为多个子网，那么每个子网的配置和管理都可以独立进行，而不需要考虑整个网络的配置。</li>
<li><strong>提高安全性</strong> ：通过将敏感数据或设备放在单独的子网中，可以提高网络的安全性。这样，即使一个子网受到攻击，也不会影响到其他子网。</li>
<li><strong>支持更大规模的网络</strong> ：随着技术的发展和需求的增加，我们可以通过划分更多的子网来支持更大的网络规模。</li>
<li><strong>简化路由决策</strong> ：子网掩码使得路由器能够更有效地进行路由决策。当路由器接收到一个数据包时，它会查看目标IP地址的子网部分，然后根据路由表中的信息决定如何将这个数据包发送到正确的目的地。</li>
</ol>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>物理设备，路由器负责执行路由决策，将数据包发送到正确的目的地。它根据目标IP地址和子网掩码，决定最佳的数据传输路径。</p>
<h2 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h2><blockquote>
<p>网关（Gateway）就是一个网络连接到另一个网络的“关口”。</p>
</blockquote>
<p>网关实质上是一个网络通向其他网络的IP地址。<br>比如有网络A和网络B，网络A的IP地址范围为 “192.168.1.1<del>192. 168.1.254”，子网掩码为255.255.255.0；<br>网络B的IP地址范围为“192.168.2.1</del>192.168.2.254”，子网掩码为255.255.255.0。<br>在没有路由器的情况下，两个网络之间是不能进行TCP&#x2F;IP通信的，即使是两个网络连接在同一台交换机（或集线器）上，<br> TCP&#x2F;IP协议也会根据子网掩码（255.255.255.0）判定两个网络中的主机处在不同的网络里。<br>而要实现这两个网络之间的通信，则必须通过网关。<br>如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机。<br>网络B向网络A转发数据包的过程也是如此。</p>
<h2 id="网络分层"><a href="#网络分层" class="headerlink" title="网络分层"></a>网络分层</h2><p>网线不属于任何一层。我觉得题主犯了一个错误，就是把物理层和物理设备或者说物理信号混为一谈了。</p>
<p>通信网的七层，只是七个抽象的层，只是对于通信的规则进行通行性的描述，不应该把某些实体的设备对应说是哪一层。你就说你的电脑吧，你用不同的软件，就可以对不同层的数据进行操作，你说它应该属于哪一层呢？物理层也只是对各种调制方式、检错方式等进行标准的描述，它也是抽象的，并不关系到你的实现或者设备上。</p>
<p>总之一点，七层都是没有实体的，它们只是对于你所通信的数据一些约定俗成的规则。它们处理的都是抽象数字，并不涉及模拟。不是因为它叫物理层，所以就和物理设备有关系。它这所以叫物理层，是因为它对数据传输的物理实现进行了定义。</p>
<p>所以可以这么认为，你在七层所处理的数据，其实都是数字的，在物理层上也是数字的，所以确确实实是比特流。但是在物理设备中，它肯定是模拟的，因为自然界中的东西都是模拟的，你永远也找不到一个0或者1出来，是吧？</p>
<p>题主要清楚一点，不要把物理设备和物理层混为一谈，整个七层所涉及的所有数据，都是物理设备一层层分析展开再打包合并了的。可以这么说，各层的意义其实都是人为的，它们本身在传输线或者设备内部都是模拟信号，只不过通过人为的规定，把他们规定成了有意义的比特流。</p>
<p>总结就是，传输线只是传输物理信号的物理设备，并不是物理层的东西。任何信号，本质上来说都是模拟的，比如你觉得计算机处理的都是数字信号吗？并不是，我们只是把那些各种三极管的输出电平给视为0或者1，人脑袋里想的那些数字信号都是一些抽象信号。你不能把抽象的物理层和实际中的模拟信号传输的网线放在一起比较。</p>
]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>笔记</tag>
        <tag>网络</tag>
      </tags>
  </entry>
</search>
